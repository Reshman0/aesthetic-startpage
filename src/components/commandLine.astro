---
const name = "stefanyas";
---

<section>
  <p>{name}@<span id="browser-info"></span> |</p>
  <input id="terminal-input" type="text" />
  <div id="overlay"></div>
  <table id="help">
    <tr>
      <th>input</th>
      <th>result</th>
    </tr>
    <tr>
      <td class="monospace">ctrl + C</td>
      <td>clears the terminal</td>
    </tr>
    <tr>
      <td class="monospace">s:</td>
      <td>searches stack overflow</td>
    </tr>
    <tr>
      <td class="monospace">r:</td>
      <td>searches reddit</td>
    </tr>
    <tr>
      <td class="monospace">help</td>
      <td>opens the help menu</td>
    </tr>
    <tr>
      <td>typed links</td>
      <td>open in the same tab</td>
    </tr>
    <tr>
      <td>anything that isn't a match</td>
      <td>searches google</td>
    </tr>
    <tr><td></td></tr>
    
    <tr>
      <td colspan="2" class="center">
        <a class="table-link"
        href="https://github.com/stefan-yas/aesthetic-startpage"
        target="_blank">Source Code</a
      >
      </td>
    </tr>
    <tr>
      <td colspan="2" class="center">
        <button id="closeTable">Close Table</button>
      </td>
    </tr>
  </table>
</section>
<style>

.center {
    text-align: center;
  }

  section {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    gap: 20px;
  }

  p {
    font-family: var(--monospace-font-family);
    font-size: 20px;
  }

  .monospace {
    font-family: var(--monospace-font-family);
  }

  #browser-info {
    font-size: 20px;
    font-weight: 500;
  }

  #terminal-input {
    background: none;
    border: none;
    font-family: var(--monospace-font-family);
    font-size: 20px;
    color: var(--text-color);
    width: 750px;
  }

  #terminal-input:focus {
    border: none;
    outline: none;
  }

  #help {
    background-color: var(--background-color);
    display: none;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: var(--text-color);
    padding: 5px;
    border-radius: var(--border-radius);
    border-collapse: collapse;
  }

  #help a {
    text-decoration: underline;
    font-size: 15px;
    color: var(--text-color);
  }

  #help a:visited {
    color: var(--text-color);
  }

  #closeTable {
    background-color: var(--card-background-color);
    padding: 5px;
    border-radius: var(--border-radius);
    border: none;
    color: var(--text-color);
    font-size: 1em;
  }

  #overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
  }

  #overlay.active,
  #help.active {
    display: block;
  }

  #help.active {
    z-index: 1;
  }

  table td,
  table th {
    border: 1px solid var(--greyed-out-text-color);
    padding: 8px;
  }

  table tr:not(:last-child) {
    border-bottom: 1px solid var(--card-background-color;
  }

  table tr:nth-child(even) {
    background-color: var(--background-color);
  }

  table tr:nth-child(odd) {
    background-color: var(--card-background-color);
  }

  table td {
    line-height: 1.5em;
  }

 

  @media only screen and (max-width: 1200px) {
    section {
      flex-direction: column;
      align-items: flex-start;
    }
    #terminal-input {
      width: 300px;
    }
  }
</style>

<p id="browser-info"></p>

<script>
  const p = document.getElementById("browser-info");
  const userAgent = navigator.userAgent;
  let browser = "unknown";

  if (userAgent.indexOf("Chrome") !== -1) {
    browser = "chrome";
  } else if (userAgent.indexOf("Firefox") !== -1) {
    browser = "firefox";
  }

  p.textContent = browser;

  const input = document.getElementById("terminal-input");
  const examples = [
    "how to tie a tie",
    "today's weather",
    "is it halloween yet",
    "what's my age again",
    "make the terminal great again",
    "we'll make our terminal... with blackjack and hookers!",
    "hey sexy! wanna kill all humans?",
    "another pointless day where I accomplish nothing",
    "did everything just taste purple for a second?",
    "at the risk of sounding positive, you can do this!",
    "you look good today!",
    "press ctrl+c to clear the terminal",
    "you can search reddit by starting your search with r:",
    "you can search stack overflow by starting your search with s:",
    "input 'help' for more info"
  ];
  const randomIndex = Math.floor(Math.random() * examples.length);
  input.placeholder = examples[randomIndex];

  input.focus();

  input.addEventListener("keydown", function (event) {
    let value = input.value.toLowerCase();
    let elements = document.querySelectorAll("a");
    let matchFound = false;
    if (event.ctrlKey && event.key === "c") {
      input.value = "";
      for (let i = 0; i < elements.length; i++) {
        let element = elements[i];
        element.style.mixBlendMode = "";
      }
    }
    for (let i = 0; i < elements.length; i++) {
      let element = elements[i];
      if (value === "" || event.keyCode !== 13) {
        continue;
      }
      if (
        element.textContent
          .toLowerCase()
          .indexOf(value.replace(/^r:|^s:/, "")) !== -1
      ) {
        window.location.href = element.href;
        matchFound = true;
        break;
      }
    }
    if (!matchFound && event.keyCode === 13) {
      if (value === "help") {
        document.getElementById("help").style.display = "block";
        document.getElementById("overlay").classList.add("active");
      } else if (value.startsWith("r:")) {
        window.location.href =
          "https://google.com/search?q=site:reddit.com " +
          value.replace("r:", "");
      } else if (value.startsWith("s:")) {
        window.location.href =
          "https://google.com/search?q=site:stackoverflow.com " +
          value.replace("s:", "");
      } else {
        let words = value.split(".");
        if (words.length >= 2) {
          window.location.href = "http://" + value;
        } else {
          window.location.href = "https://google.com/search?q=" + value;
        }
      }
    }
  });

  const table = document.getElementById("help");

  function exitTable() {
  table.style.display = "none";
  document.getElementById("overlay").classList.remove("active");
  const input = document.getElementById("terminal-input");
  input.value = "";
  input.focus();
}

document.addEventListener("keydown", function(event) {
  if (event.keyCode === 27) {
    exitTable();
  }
});

const closeTableButton = document.getElementById("closeTable");

closeTableButton.onclick = function() {
  exitTable();
};

</script>
